{"version":3,"sources":["pages/login/store/actionCreators.js","common/header/style.js","common/header/index.js"],"names":["createLoginAction","username","password","dispatch","axios","method","url","headers","data","qs","stringify","userName","then","res","code","localStorage","setItem","defaults","common","createLoginState","createErrorState","catch","err","console","log","checkLoginStateAction","date","Date","now","parse","getItem","loginExpire","getLogoutAction","removeItem","type","constants","HeaderWrapper","styled","div","HeaderWidthLimit","HeaderFirst","Nav","NavLink","Link","LogWrapper","NavItem","NavSearch","input","attrs","placeholder","NavSearchWrapper","button","SearchInfo","SearchInfoTitle","SearchInfoList","SearchInfoItem","a","HeaderSecond","ArticleTitle","Header","showSearchInfo","endPage","props","focused","mouseIn","currentPage","totalPage","list","handleMouseEnter","handleMouseLeave","handleSwitchShow","inDetail","listToShow","newList","toJS","length","slice","onMouseEnter","onMouseLeave","className","onClick","bind","degree","ref","e","spinIcon","spinning","searchinfodone","map","item","key","this","login","handleLogout","to","handleInputBlur","handleInputFocus","id","wrapper","activeStyle","color","borderBottom","href","target","CSSTransition","timeout","in","classNames","onFocus","onBlur","loginOrNot","getHeaderSecond","style","overflow","window","addEventListener","handleMouseWheel","title","removeEventListener","document","getElementById","deltaY","classList","add","remove","Component","connect","state","getIn","loginActions","message","info","actionCreators","getFocusedAction","size","getList","getBlurAction","getEnterAction","getLeaveAction","transform","getSwitchAction"],"mappings":"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","file":"static/js/11.8849f29d.chunk.js","sourcesContent":["import * as constants from './constants';\r\nimport axios from 'axios';\r\nimport qs from 'qs';\r\n/* Action Creaters with Thunk */\r\n\r\nexport const createLoginAction = (username, password) => {\r\n\t//返回函数\r\n  return (dispatch) => {\r\n\t//axios\r\n\t\taxios(\r\n\t\t{\r\n\t\t\tmethod: 'post',\r\n\r\n\t\t\turl: '/gyq/users/login',\r\n\r\n\t\t\t//FormData\r\n\t\t\theaders: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n\r\n\t\t\tdata: qs.stringify({\r\n\t\t\t\tuserName: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t\t).then(\r\n\t\t// let params = qs.stringify({\r\n\t\t// \tuserName: username,\r\n\t\t// \tpassword: password\r\n\t\t// })\r\n\t\t// axios.post(\"/gyq/users/login\", params).then(\r\n\t\tres => {\r\n\t\t\t\t// Token处理\r\n\t\t\t\tconst { code, data } = res.data;\r\n\t\t\t\tif (code === 200) {\r\n\t\t\t\t\tlocalStorage.setItem('jwToken', data); \r\n\t\t\t\t\taxios.defaults.headers.common['Authorization'] = data;\r\n\t\t\t\t\tdispatch(createLoginState());\r\n\t\t\t\t} else if (code === 401) {\r\n\t\t\t\t\tdispatch(createErrorState());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t).catch(\r\n\t\t\terr => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tdispatch(createErrorState());\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const checkLoginStateAction = () => {\r\n\treturn (dispatch) => {\r\n\t\tconst date = Date.now();\r\n\t\t//超时\r\n\t\tif(Date.parse(localStorage.getItem(\"jwToken\")) < date || !localStorage.getItem(\"jwToken\")) {\r\n\t\t\tdispatch(loginExpire());\r\n\t\t} else if (Date.parse(localStorage.getItem(\"jwToken\")) >= date) {\r\n\t\t\tdispatch(createLoginState());\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const getLogoutAction = () => {\r\n\treturn (dispatch) => {\r\n\t\tlocalStorage.removeItem(\"jwToken\");\r\n\t\tdispatch(loginExpire());\r\n\t}\r\n}\r\n\r\n//Private\r\nconst createLoginState = () => ({\r\n\ttype: constants.LOGIN_SUC\r\n})\r\n\r\nconst loginExpire = () => ({\r\n\ttype: constants.LOGIN_EXP\r\n})\r\n\r\nconst createErrorState = () => ({\r\n\ttype: constants.LOGIN_FAI\r\n})","import styled from 'styled-components';\r\nimport { NavLink as Link } from 'react-router-dom';\r\nimport { Spin as AntSpin } from 'antd';\r\n\r\nexport const HeaderWrapper = styled.div`\r\n\tposition: -webkit-sticky;\r\n\tposition: sticky;\r\n\ttop:0;\r\n\theight: 56px;\r\n\twidth: 100%;\r\n\tbackground: #001529;\r\n\toverflow: hidden;\r\n\tz-index: 1;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t.scrollUp {\r\n\t\ttransform: translateY(-56px);\r\n\t}\r\n`;\r\n\r\nexport const HeaderWidthLimit = styled.div`\r\n\tflex-basis: 1000px;\r\n\ttransition: all 150ms ease-out;\r\n\ttransition-delay: 300ms;\r\n`;\r\n\r\n\r\nexport const HeaderFirst = styled.div`\r\n\tflex-basis: 1000px;\r\n\theight: 56px;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: between;\r\n`;\r\n\r\nexport const Logo = styled.div`\r\n\twidth: 100px;\r\n\tmargin-right: 140px;\r\n\theight: 56px;\r\n\tdisplay: block;\r\n\tbackground-size: contain;\r\n`;\r\n\r\nexport const Nav = styled.div`\r\n\twidth: 600px;\r\n\theight: 100%;\r\n\tmargin: 0 auto;\r\n\tbox-sizing: border-box;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n`;\r\n\r\nexport const NavLink = styled(Link)`\r\n\tline-height: 56px;\r\n\theight: 56px;\r\n`;\r\n\r\nexport const Spin = styled(AntSpin)`\r\n\t\r\n`;\r\n\r\nexport const LogWrapper = styled.div`\r\n\twidth: 400px;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n`;\r\n\r\nexport const NavItem = styled.div`\r\n\theight: 56px;\r\n\tline-height: 56px;\r\n\ttext-align: center;\r\n\tcolor: #D3D3D3;\r\n\tfont-size: 16px;\r\n\ttransition: all 200ms ease-out;\r\n\tbox-sizing: border-box;\r\n\tcursor: pointer;\r\n\t&.left {\r\n\t\tmargin-right: 30px;\r\n\t}\r\n\t&.right {\r\n\t\tmargin-left: 30px;\r\n\t}\r\n\t.iconfont {\r\n\t\tline-height: 30px;\r\n\t\twidth: 30px;\r\n\t\tfont-size: 17px;\r\n\t}\r\n\ta {\r\n\t\tcolor: #D3D3D3;\r\n\t\tdisplay: block;\r\n\t\tline-height: 56px;\r\n\t\t&:hover {\r\n\t\t\tcolor: #87CEFA;\r\n\t\t}\r\n\t}\r\n\t&:hover {\r\n\t\tcolor: #87CEFA;\r\n\t}\r\n`;\r\n\r\nexport const NavSearch = styled.input.attrs({\r\n\tplaceholder: \"搜索\"\r\n})`\r\n\twidth: 178px;\r\n\theight: 38px;\r\n\tborder: none;\r\n\tborder-radius: 2px;\r\n\tmargin-top: 9px;\r\n\tpadding: 0 35px 0 20px;\r\n\tbackground: #333333;\r\n\tborder-sizing: border-box;\r\n\tcolor: #DCDCDC;\r\n\tfont-size: 14px;\r\n\t&::placeholder {\r\n\t\tcolor: \t#A9A9A9;\r\n\t}\r\n\t&.focused {\r\n\t\twidth: 250px;\r\n\t}\r\n\t&.slide-enter {\r\n\t\ttransition: all 350ms ease-out;\r\n\t}\r\n\r\n\t&.slide-exit {\r\n\t\ttransition: all 350ms ease-out;\r\n\t}\r\n`;\r\n\r\nexport const Button = styled.button`\r\n\tfloat: right;\r\n\tline-height: 38px;\r\n\tborder-radius: 19px;\r\n\tmargin-top: 9px;\r\n\tborder: 1px solid #008B8B;\r\n\tmargin-right: 20px;\r\n\tpadding: 0 20px;\r\n\tfont-size: 14px;\r\n\tcursor: pointer;\r\n\t&.reg {\r\n\t\tcolor: #008B8B;\r\n\t\tbackground: #fff;\r\n\t}\r\n\t&.reg:hover {\r\n\t\tbackground: #f5f5f5;\r\n\t}\r\n\t\r\n\t&.write {\r\n\t\tcolor: #fff;\r\n\t\tbackground: #008B8B;\r\n\t}\r\n\t&.write:hover {\r\n\t\tbackground: #008080;\r\n\t}\r\n`;\r\n\r\n//子绝父相的实现\r\nexport const NavSearchWrapper = styled.div `\r\n\tmargin-left: 30px;\r\n\tposition: relative;\r\n\t.zoom {\r\n\t\tcolor: #A9A9A9;\r\n\t\tcursor: pointer;\r\n\t\tposition: absolute;\r\n\t\tright: 5px;\r\n\t\ttop: 14px;\r\n\t\twidth:30px;\r\n\t\tline-height:30px;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 15px;\r\n\t\t&.focused {\r\n\t\t\tcolor: #87CEFA;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const SearchInfo = styled.div`\r\n\topacity: 1;\r\n\tposition: absolute; //脱标\r\n\tleft: 0;\r\n\ttop: 56px;\r\n\twidth: 240px;\r\n\tpadding: 0 20px 10px 20px;\r\n\tbackground: white;\r\n\tbox-shadow: 0 0 8px rgba(0,0,0,.2);\r\n`;\r\n\r\nexport const SearchInfoTitle = styled.div`\r\n\twidth:100%;\r\n\theight: 20px;\r\n\tmargin-top:20px;\r\n\tmargin-bottom: 15px;\r\n\tcolor: #969696;\r\n\t.title {\r\n\t\tfloat: left;\r\n\t\tline-height: 20px;\r\n\t\tfont-size: 17px;\r\n\t}\r\n\t.switch {\r\n\t\tfloat: right;\r\n\t\tdisplay: block;\r\n\t\tline-height: 20px;\r\n\t\tfont-size: 14px;\r\n\t\tcursor: pointer;\r\n\t\t&:hover {\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.spin {\r\n\t\t\tfloat: left;\r\n\t\t\theight: 13px;\r\n\t\t\tfont-size: 13px;\r\n\t\t\tmargin-right: 2px;\r\n\t\t\ttransition: all 300ms ease-out;\r\n\t\t\ttransform-origin: 45% 75%;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const SearchInfoList = styled.div`\r\n\toverflow: hidden;\r\n\tmin-height: 100px;\r\n`;\r\n\r\nexport const SearchInfoItem = styled.a`\r\n\tfloat: left;\r\n\tmargin-right: 10px;\r\n\tmargin-bottom: 5px;\r\n\tline-height: 20px;\r\n\tpadding: 0 5px;\r\n\tcolor: #787878;\r\n\tfont-size: 12px;\r\n\tborder: 1px solid #ddd;\r\n\tborder-radius: 3px;\r\n\tcursor: pointer;\r\n\ttransition: all 100ms ease-in;\r\n\t&:hover {\r\n\t\tcolor: #888;\r\n\t\tborder: 1px solid #888;\r\n\t}\r\n`;\r\n\r\nexport const HeaderSecond = styled.div`\r\n\twidth: 1000px;\r\n\theight: 56px;\r\n`;\r\n\r\nexport const ArticleTitle = styled.div`\r\n\tmargin: 0 auto;\r\n\twidth: 1000px;\r\n\t.title {\r\n\t\tcolor:#F0FFFF;\r\n\t\tfont-size: 24px;\r\n\t\tfont-weight: 530;\r\n\t\tline-height: 56px;\r\n\t}\r\n`;\r\n\r\n","import React, { Component, Fragment } from 'react';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport { connect } from 'react-redux';\r\nimport { actionCreators } from './store';\r\nimport * as loginActions from '../../pages/login/store/actionCreators';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n\tHeaderWrapper,\r\n\tHeaderWidthLimit,\r\n\tNav,\r\n\tNavItem,\r\n\tNavSearchWrapper,\r\n\tNavSearch,\r\n\tSearchInfo,\r\n\tSearchInfoTitle,\r\n\tSearchInfoList,\r\n\tSearchInfoItem,\r\n\tHeaderFirst,\r\n\tHeaderSecond,\r\n\tArticleTitle,\r\n\tNavLink,\r\n\tLogWrapper\r\n} from './style';\r\nimport { message, Spin } from 'antd';\r\n\r\nclass Header extends Component {\r\n\r\n\t/* 搜索框展示内容 */\r\n\tshowSearchInfo = () => {\r\n\t\tconst {\r\n\t\t\tfocused,\r\n\t\t\tmouseIn,\r\n\t\t\tcurrentPage,\r\n\t\t\ttotalPage,\r\n\t\t\tlist,\r\n\t\t\thandleMouseEnter,\r\n\t\t\thandleMouseLeave,\r\n\t\t\thandleSwitchShow,\r\n\t\t\tinDetail\r\n\t\t} = this.props;\r\n\r\n\t\tlet endPage;\r\n\t\tlet listToShow = [];\r\n\t\tconst newList = list.toJS();\r\n\t\tif(currentPage !== totalPage) {  //计算切片终点\r\n\t\t\tendPage = 10;\r\n\t\t}else endPage = newList.length % 10;\r\n\t\tlistToShow = newList.slice((currentPage - 1) * 10, (currentPage - 1) * 10 + endPage);\r\n\r\n\t\tif( (focused || mouseIn) && !inDetail ) {\r\n\t\t\treturn (\r\n\t\t\t\t<SearchInfo\r\n\t\t\t\t\tonMouseEnter={handleMouseEnter}\r\n\t\t\t\t\tonMouseLeave={handleMouseLeave}\r\n\t\t\t\t>\r\n\t\t\t\t\t<SearchInfoTitle>\r\n\t\t\t\t\t\t<span className=\"title\">标签</span>\r\n\t\t\t\t\t\t<span className=\"switch\"\r\n\t\t\t\t\t\t\tonClick={ handleSwitchShow.bind(this, this.props.degree) }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span ref={ e => this.spinIcon = e } className=\"iconfont spin\">&#xe851;</span>\r\n\t\t\t\t\t\t\t换一页\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</SearchInfoTitle>\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\t<Spin spinning={!this.props.searchinfodone}>\r\n\t\t\t\t\t\t\t<SearchInfoList>\r\n\t\t\t\t\t\t\t\t{listToShow.map((item)=>{\r\n\t\t\t\t\t\t\t\t\treturn (<SearchInfoItem key={item}>{item}</SearchInfoItem>)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</SearchInfoList>\r\n\t\t\t\t\t\t</Spin>\r\n\t\t\t\t\t}\r\n\t\t\t\t</SearchInfo>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\t/* 导航栏右侧根据登录状态调整显示 */\r\n\tloginOrNot() {\r\n\t\tif(!this.props.login) {\r\n\t\t\treturn (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<Link to=\"/register\">\r\n\t\t\t\t\t\t<NavItem className=\"right\">\r\n\t\t\t\t\t\t\t注册\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/login\">\r\n\t\t\t\t\t\t<NavItem className=\"right\">\r\n\t\t\t\t\t\t\t登录\r\n\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</Fragment>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<NavItem onClick={this.props.handleLogout} className=\"right\">注销</NavItem>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tfocused,\r\n\t\t\thandleInputBlur,\r\n      handleInputFocus,\r\n      list\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<HeaderWrapper id=\"con\" ref={e => this.wrapper = e}>\r\n\t\t\t\t<HeaderWidthLimit id=\"scrollUp\">\r\n\t\t\t\t\t<HeaderFirst>\r\n\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t<NavItem className=\"left\">\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tto=\"/\"\r\n\t\t\t\t\t\t\t\t\tactiveStyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"#87CEFA\",\r\n\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px solid #87CEFA\"\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"iconfont\">&#xe6a1;</span> 主页\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t<NavItem className=\"left\">\r\n\t\t\t\t\t\t\t\t<a href=\"https://github.com/Cyanzll/cyanblog\" target=\"view_window\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"iconfont\">&#xe853;</span> 仓库\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t<NavSearchWrapper>\r\n\t\t\t\t\t\t\t\t<CSSTransition\r\n\t\t\t\t\t\t\t\t\ttimeout = {350}\r\n\t\t\t\t\t\t\t\t\tin = {focused}\r\n\t\t\t\t\t\t\t\t\tclassNames = \"slide\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<NavSearch \r\n\t\t\t\t\t\t\t\t\tclassName = {focused ? \"focused\" : \"\"}\r\n\t\t\t\t\t\t\t\t\tonFocus = {()=>{handleInputFocus(list)}} \r\n\t\t\t\t\t\t\t\t\tonBlur = {handleInputBlur}\r\n\t\t\t\t\t\t\t\t\t></NavSearch>\r\n\t\t\t\t\t\t\t\t</CSSTransition>\r\n\t\t\t\t\t\t\t\t<span className={focused ? \"iconfont focused zoom\" : \"iconfont zoom\"}>&#xe63d;</span>\r\n\t\t\t\t\t\t\t\t{ this.showSearchInfo() }\r\n\t\t\t\t\t\t\t</NavSearchWrapper>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t<LogWrapper>\r\n\t\t\t\t\t\t\t{this.loginOrNot()}\r\n\t\t\t\t\t\t</LogWrapper>\r\n\t\t\t\t\t</HeaderFirst>\r\n\t\t\t\t\t{this.getHeaderSecond(this.props.inDetail)}\r\n\t\t\t\t</HeaderWidthLimit>\r\n\t\t\t</HeaderWrapper>\r\n\t\t);\r\n\t}\r\n\r\n\t/* 文章详情页面头部 */\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.inDetail) {\r\n\t\t\tthis.wrapper.style.overflow = \"hidden\";\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.overflow = \"visible\";\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif(this.props.inDetail) {\r\n\t\t\tthis.wrapper.style.overflow = \"hidden\";\r\n\t\t} else {\r\n\t\t\tthis.wrapper.style.overflow = \"visible\";\r\n\t\t}\r\n\t}\r\n\r\n\t/* 文章详情页面头部 */\r\n\tgetHeaderSecond(inDetail) {\r\n\t\tif(inDetail) {\r\n\t\t\twindow.addEventListener(\"mousewheel\",this.handleMouseWheel);\r\n\t\t\treturn(\r\n\t\t\t\t<HeaderSecond>\r\n\t\t\t\t\t<ArticleTitle>\r\n\t\t\t\t\t\t<h1 className=\"title\">\r\n\t\t\t\t\t\t\t{this.props.title}\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</ArticleTitle>\r\n\t\t\t\t</HeaderSecond>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\twindow.removeEventListener(\"mousewheel\",this.handleMouseWheel);\r\n\t\t}\r\n\t}\r\n\r\n\t/* 回到顶部功能 */\r\n\thandleMouseWheel(e) {\r\n\t\tconst div = document.getElementById(\"scrollUp\");\r\n\t\tif(e.deltaY > 0) {\r\n\t\t\tdiv.classList.add(\"scrollUp\");\r\n\t\t} else {\r\n\t\t\tdiv.classList.remove(\"scrollUp\");\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tfocused: state.getIn([\"header\", \"focused\"]),  //combineReducers, immutable.js\r\n\tmouseIn: state.getIn([\"header\", \"mouseIn\"]),\r\n\tlist: state.getIn([\"header\", \"list\"]),\r\n\tcurrentPage: state.getIn([\"header\", \"currentPage\"]),\r\n\ttitle: state.getIn([\"home\", \"title\"]),       //detail页面文章标题\r\n\tinDetail: state.getIn([\"detail\", \"inDetail\"]), //我们是否到达了Detail?\r\n\tdegree: state.getIn([\"header\", \"degree\"]),\r\n\tlogin: state.getIn([\"login\", \"login\"]),\r\n\tsearchinfodone: state.getIn([\"header\", \"searchinfodone\"])\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\thandleLogout() {\r\n\t\tdispatch(loginActions.getLogoutAction());\r\n\t\tmessage.info(\"成功退出登录\", 1);\r\n\t},\r\n\thandleInputFocus(list) {\r\n    dispatch(actionCreators.getFocusedAction());\r\n    (list.size === 0) && (dispatch(actionCreators.getList()));\r\n\t},\r\n\thandleInputBlur() {\r\n\t\tdispatch(actionCreators.getBlurAction());\r\n\t},\r\n\thandleMouseEnter() {\r\n\t\tdispatch(actionCreators.getEnterAction());\r\n\t},\r\n\thandleMouseLeave() {\r\n\t\tdispatch(actionCreators.getLeaveAction());\r\n\t},\r\n\thandleSwitchShow(degree) {\r\n\t\tconst style = \"rotate(\" + (degree + 360) + \"deg)\"; \r\n\t\tconsole.log(style);\r\n\t\tthis.spinIcon.style.transform = style;\r\n\t\tdispatch(actionCreators.getSwitchAction(degree+360));\r\n\t}\r\n});\r\n\r\nexport default connect( mapStateToProps, mapDispatchToProps )( Header );"],"sourceRoot":""}